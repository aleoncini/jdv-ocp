<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<vdb name="transactions" version="1">
<description/>
<property name="validationDateTime" value="Mon Sep 11 23:09:16 CEST 2017"/>
<property name="validationVersion" value="8.12.5"/>
<model name="mariadb_accounts" visible="false">
<source connection-jndi-name="accounts_DS" name="accounts" translator-name="mysql5"/>
<metadata type="DDL"><![CDATA[

CREATE FOREIGN TABLE HOLDINGS (
	TRANSACTION_ID integer NOT NULL OPTIONS(NAMEINSOURCE '`TRANSACTION_ID`', NATIVE_TYPE 'INT', FIXED_LENGTH 'TRUE'),
	ACCOUNT_ID integer OPTIONS(NAMEINSOURCE '`ACCOUNT_ID`', NATIVE_TYPE 'INT', FIXED_LENGTH 'TRUE'),
	PRODUCT_ID integer OPTIONS(NAMEINSOURCE '`PRODUCT_ID`', NATIVE_TYPE 'INT', FIXED_LENGTH 'TRUE'),
	PURCHASE_DATE timestamp NOT NULL DEFAULT 'CURRENT_TIMESTAMP' OPTIONS(NAMEINSOURCE '`PURCHASE_DATE`', NATIVE_TYPE 'TIMESTAMP', FIXED_LENGTH 'TRUE'),
	SHARES_COUNT integer OPTIONS(NAMEINSOURCE '`SHARES_COUNT`', NATIVE_TYPE 'INT', FIXED_LENGTH 'TRUE'),
	CONSTRAINT "PRIMARY" PRIMARY KEY(TRANSACTION_ID) OPTIONS(NAMEINSOURCE '`PRIMARY`')
) OPTIONS(NAMEINSOURCE '`accounts`.`HOLDINGS`', UPDATABLE 'TRUE', CARDINALITY '41');

CREATE FOREIGN TABLE PRODUCT (
	ID integer NOT NULL OPTIONS(NAMEINSOURCE '`ID`', NATIVE_TYPE 'INT', FIXED_LENGTH 'TRUE'),
	SYMBOL string(16) OPTIONS(NAMEINSOURCE '`SYMBOL`', NATIVE_TYPE 'VARCHAR'),
	COMPANY_NAME string(256) OPTIONS(NAMEINSOURCE '`COMPANY_NAME`', NATIVE_TYPE 'VARCHAR'),
	CONSTRAINT "PRIMARY" PRIMARY KEY(ID) OPTIONS(NAMEINSOURCE '`PRIMARY`')
) OPTIONS(NAMEINSOURCE '`accounts`.`PRODUCT`', UPDATABLE 'TRUE', CARDINALITY '25');

]]></metadata>
</model>
<model name="model" type="VIRTUAL">
<property name="imports" value="mariadb_accounts"/>
<metadata type="DDL"><![CDATA[

CREATE VIEW products (
	ID integer NOT NULL OPTIONS(FIXED_LENGTH 'TRUE'),
	SYMBOL string(16),
	COMPANY_NAME string(256)
) OPTIONS(UPDATABLE 'TRUE')
AS
	SELECT * FROM mariadb_accounts.PRODUCT;

CREATE VIEW holdings (
	TRANSACTION_ID integer NOT NULL OPTIONS(FIXED_LENGTH 'TRUE'),
	ACCOUNT_ID integer OPTIONS(FIXED_LENGTH 'TRUE'),
	PRODUCT_ID integer OPTIONS(FIXED_LENGTH 'TRUE'),
	PURCHASE_DATE timestamp NOT NULL DEFAULT 'CURRENT_TIMESTAMP' OPTIONS(FIXED_LENGTH 'TRUE'),
	SHARES_COUNT integer OPTIONS(FIXED_LENGTH 'TRUE')
) OPTIONS(UPDATABLE 'TRUE')
AS
	SELECT * FROM mariadb_accounts.HOLDINGS;

CREATE VIEW productTransacted (
	TRANSACTION_ID integer NOT NULL OPTIONS(FIXED_LENGTH 'TRUE'),
	ACCOUNT_ID integer OPTIONS(FIXED_LENGTH 'TRUE'),
	PURCHASE_DATE timestamp NOT NULL DEFAULT 'CURRENT_TIMESTAMP' OPTIONS(FIXED_LENGTH 'TRUE'),
	SHARES_COUNT integer OPTIONS(FIXED_LENGTH 'TRUE'),
	SYMBOL string(16),
	COMPANY_NAME string(256)
)
AS
	SELECT mariadb_accounts.HOLDINGS.TRANSACTION_ID, mariadb_accounts.HOLDINGS.ACCOUNT_ID, mariadb_accounts.HOLDINGS.PURCHASE_DATE, mariadb_accounts.HOLDINGS.SHARES_COUNT, mariadb_accounts.PRODUCT.SYMBOL, mariadb_accounts.PRODUCT.COMPANY_NAME FROM mariadb_accounts.HOLDINGS, mariadb_accounts.PRODUCT WHERE mariadb_accounts.HOLDINGS.PRODUCT_ID = mariadb_accounts.PRODUCT.ID;

]]></metadata>
</model>
</vdb>
